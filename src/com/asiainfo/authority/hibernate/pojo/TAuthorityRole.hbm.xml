<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
    TOOL.T_AUTHORITY_ROLE  
    LXC.T_XT_JSXX
-->
<hibernate-mapping>
    <class name="com.asiainfo.authority.hibernate.pojo.TAuthorityRole" table="T_AUTHORITY_ROLE" schema="tool"
    dynamic-insert="true" dynamic-update="true" >
        <id name="NRid" type="java.lang.Short">
            <column name="N_RID" precision="3" scale="0" />
            <generator class="assigned" />
        </id>
        <property name="NRlevel" type="java.lang.Short">
			<column name="N_RLEVEL" precision="8" scale="0" />
		</property>
		
<!--         <many-to-one name="TAuthorityLevel" class="com.asiainfo.authority.hibernate.pojo.TAuthorityLevel"  -->
<!--         fetch="select" lazy="false" unique="true"> -->
<!--             <column name="N_RLEVEL" precision="3" scale="0" not-null="true" /> -->
<!--         </many-to-one> -->
        <property name="CRno" type="java.lang.String">
            <column name="C_RNO" length="3" not-null="true" unique="true" />
        </property>
        <property name="CRname" type="java.lang.String">
            <column name="C_RNAME" length="60" not-null="true" unique="true" />
        </property>
        <property name="CRnote" type="java.lang.String">
            <column name="C_RNOTE" length="512" />
        </property>
        <property name="CRctime" type="java.util.Date" insert="false">
            <column name="C_RCTIME" length="7" not-null="true" />
        </property>
        <property name="CRcip" type="java.lang.String">
            <column name="C_RCIP" length="60" />
        </property>
        <property name="CRcreator" type="java.lang.String">
            <column name="C_RCREATOR" length="24" />
        </property>
		<property name="CRons" type="java.lang.String" insert="false">
			<column name="C_RONS" length="1"/>
		</property>
		<property name="CRont" type="java.util.Date" insert="false">
			<column name="C_RONT" length="7" />
		</property>
<!--         <set name="TAuthorityRmrelations" inverse="true"> -->
<!--             <key> -->
<!--                 <column name="N_RID" precision="3" scale="0" not-null="true" /> -->
<!--             </key> -->
<!--             <one-to-many class="com.asiainfo.authority.hibernate.pojo.TAuthorityRmrelation" /> -->
<!--         </set> -->
    </class>
    <sql-query name="findRoleByUserId_SQLQuery">
      <return alias="role" class="com.asiainfo.authority.hibernate.pojo.TAuthorityRole">
	  </return>
	  <![CDATA[	
select t1.N_RID      AS {role.NRid},
       t1.C_RNO      AS {role.CRno},
       t1.C_RNAME    AS {role.CRname},
       t1.N_RLEVEL   AS {role.NRlevel},
       t1.C_RNOTE    AS {role.CRnote},
       t1.C_RCTIME   AS {role.CRctime},
       t1.C_RCIP     AS {role.CRcip},
       t1.C_RCREATOR AS {role.CRcreator},
       t1.C_RONS     AS {role.CRons},
       t1.C_RONT     AS {role.CRont}
  from tool.t_authority_role t1
 WHERE t1.n_rid IN (
            SELECT t2.n_rid FROM t_authority_urrelation t2 WHERE t2.N_UID = :userId
	   )
  ]]>
	</sql-query>
</hibernate-mapping>
